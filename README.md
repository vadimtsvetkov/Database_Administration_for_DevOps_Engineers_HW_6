# Database_Administration_for_DevOps_Engineers_HW_6
## VADIM TSVETKOV

«Troubleshooting»

**Задание 1.**

- необходимо найти нужную операция db.currentOp()
для прерывания операции использовать db.killOp()

- для исбежания схожих ситуаций можно установить ttl операции - maxTimeMS()

**Задание 2.**

Из документации Redis:
Задержка, генерируемая expires
Redis удаляет ключи с истекшим сроком действия двумя способами:

Один отложенный способ истекает для ключа, когда он запрашивается командой, но обнаруживается, что срок его действия уже истек.
Один активный способ истекает для нескольких ключей каждые 100 миллисекунд.
Активное истечение срока действия разработано таким образом, чтобы быть адаптивным. Цикл истечения срока действия запускается каждые 100 миллисекунд (10 раз в секунду) и выполняет следующие действия:

Пример ключей ACTIVE_EXPIRE_CYCLE_LOOKUPS_PER_LOOP, удаляющий все ключи, срок действия которых уже истек.
Если было обнаружено, что срок действия более 25% ключей истек, повторите.

По сути, это означает, что если в базе данных есть много-много ключей, срок действия которых истекает в одну и ту же секунду, и они составляют не менее 25% от текущей совокупности ключей с установленным сроком действия, Redis может заблокировать, чтобы процент ключей, срок действия которых уже истек, был ниже 25%.

Короче говоря: имейте в виду, что срок действия многих ключей, истекающих в один и тот же момент, может быть источником задержки.

**Задание 3.**

Ошибка 2013 возникает, когда соединение между клиентом MySQL и сервером базы данных обрывается, обычно потому, что базе данных требуется слишком много времени для ответа. Проверить качество соединения с базой ( интернет ) и попробовать увеличить значение  "net-read-timeout", чтобы дать больше времени для выполнения запроса.

**Задание 4.**

Исходя из вывода "postmaster invoked oom-killer" системе не хватает оперативной памяти и она принудительного завершает выбранные запущенные процессы.
Можно это увеличить оперативную память и swap, настроить праметры использования памяти PostgreSQL: max_connections, shared_buffer, work_mem, effective_cache_size, maintenance_work_mem.
